<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="assets/ase.ico" type="image/x-icon">

<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Minecraft Style Inventory</title>
<style>
  body {
    background: #222;
    color: white;
    font-family: Arial, sans-serif;
    user-select: none;
    margin: 0; padding: 20px;
  }
  h2 {
    margin-bottom: 20px;
  }
  #inventory {
    display: none;
    position: fixed;
    top: 50px;
    left: 50%;
    transform: translateX(-50%);
    background: #3c3c3c;
    border: 3px solid #999;
    padding: 12px;
    box-sizing: border-box;
    width: calc(9 * 54px + 62px); /* 9 slots * slot size + grid gap */
    user-select: none;
    z-index: 100;
  }
  #main-inventory {
    display: grid;
    grid-template-columns: repeat(9, 54px);
    grid-gap: 4px;
    margin-bottom: 12px;
  }
  #hotbar {
    display: grid;
    grid-template-columns: repeat(9, 54px);
    grid-gap: 4px;
  }
  .slot {
    width: 54px;
    height: 54px;
    background: #666;
    border: 2px solid #999;
    position: relative;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
  }
  .slot:hover {
    border-color: #fff;
  }
  .slot img {
    max-width: 44px;
    max-height: 44px;
    pointer-events: none;
  }
  .count {
    position: absolute;
    bottom: 4px;
    right: 4px;
    background: rgba(0,0,0,0.7);
    font-size: 14px;
    color: white;
    padding: 1px 5px;
    border-radius: 8px;
    pointer-events: none;
    user-select: none;
  }
  #cursorItem {
    position: fixed;
    pointer-events: none;
    width: 44px;
    height: 44px;
    display: none;
    z-index: 200;
  }
</style>
</head>
<body>

<h2>Press 'E' to toggle Inventory</h2>

<div id="inventory">
  <div id="main-inventory"></div>
  <div id="hotbar"></div>
</div>

<img id="cursorItem" src="" alt="held item" />

<script>
  const inventory = document.getElementById('inventory');
  const mainInvContainer = document.getElementById('main-inventory');
  const hotbarContainer = document.getElementById('hotbar');
  const cursorItem = document.getElementById('cursorItem');

  // Total slots: 9x4 main + 9x1 hotbar = 45
  // We'll represent inventory as an array of length 45
  // First 36 = main inventory, last 9 = hotbar

  let items = new Array(36).fill(null);

  // Example items in some slots (using free item images)
  items[0] = { name: 'Wood', sprite: '', count: 64 };
  items[10] = { name: 'Stone', sprite: '', count: 32 };
  items[36] = { name: 'Apple', sprite: '', count: 5 }; // hotbar slot 0
  items[44] = { name: 'Torch', sprite: '', count: 15 }; // hotbar slot 8

  let heldItem = null;
  let heldCount = 0;

  function renderSlots(container, startIdx, count) {
    container.innerHTML = '';
    for (let i = 0; i < count; i++) {
      const slotIndex = startIdx + i;
      const item = items[slotIndex];
      const slot = document.createElement('div');
      slot.className = 'slot';

      if (item) {
        slot.innerHTML = `
          <img src="${item.sprite}" alt="${item.name}" />
          <div class="count">${item.count}</div>
        `;
      }

      slot.addEventListener('click', () => {
        // Pick up item
        if (!heldItem && item) {
          heldItem = item;
          heldCount = item.count;
          items[slotIndex] = null;
        } else if (heldItem) {
          if (!item) {
            // Place held item in empty slot
            items[slotIndex] = { name: heldItem.name, sprite: heldItem.sprite, count: heldCount };
            heldItem = null;
            heldCount = 0;
          } else {
            // Swap held and slot item
            [items[slotIndex], heldItem] = [{ name: heldItem.name, sprite: heldItem.sprite, count: heldCount }, item];
            heldCount = heldItem.count;
            heldItem = { name: heldItem.name, sprite: heldItem.sprite, count: heldCount };
          }
        }
        renderInventory();
        updateCursorItem();
      });

      container.appendChild(slot);
    }
  }

  function renderInventory() {
    renderSlots(mainInvContainer, 0, 27);
    renderSlots(hotbarContainer, 36, 9);
  }

  function updateCursorItem() {
    if (heldItem) {
      cursorItem.src = heldItem.sprite;
      cursorItem.style.display = 'block';
    } else {
      cursorItem.style.display = 'none';
    }
  }

  window.addEventListener('mousemove', (e) => {
    if (heldItem) {
      cursorItem.style.left = e.pageX - 20 + 'px';
      cursorItem.style.top = e.pageY - 10 + 'px';
    }
  });

  window.addEventListener('keydown', (e) => {
    if (e.key.toLowerCase() === 'e') {
      if (inventory.style.display === 'none' || inventory.style.display === '') {
        inventory.style.display = 'block';
      } else {
        inventory.style.display = 'none';
      }
    }
  });

  renderInventory();
</script>

</body>
</html>
